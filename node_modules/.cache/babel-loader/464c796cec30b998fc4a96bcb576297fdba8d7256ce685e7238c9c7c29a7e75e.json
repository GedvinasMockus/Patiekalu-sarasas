{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"text-center\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-h3 text-center\"\n}, \"Found no restaurants!\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"headline\"\n}, \"Confirm Deletion\", -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Are you sure you want to delete this restaurant?\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LoadingDialog = _resolveComponent(\"LoadingDialog\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_divider = _resolveComponent(\"v-divider\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_v_container, {\n    \"align-start\": \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_LoadingDialog, {\n      modelValue: $setup.loading,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loading = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"]), !$setup.loading && $setup.claims.role === 'Owner' ? (_openBlock(), _createBlock(_component_v_col, {\n      key: 0,\n      md: \"8\",\n      \"offset-md\": \"2\",\n      lg: \"6\",\n      \"offset-lg\": \"3\",\n      xl: \"2\",\n      \"offset-xl\": \"5\",\n      class: \"mb-5 mt-5\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_v_btn, {\n        color: \"blue-lighten-1\",\n        class: \"text-capitalize\",\n        to: {\n          name: 'restaurants'\n        },\n        size: \"large\",\n        active: false\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Create new restaurant\")]),\n        _: 1 /* STABLE */\n      })])]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), !$setup.loading ? (_openBlock(), _createBlock(_component_v_row, {\n      key: 1,\n      class: \"mt-5\"\n    }, {\n      default: _withCtx(() => [!$setup.loading ? (_openBlock(true), _createElementBlock(_Fragment, {\n        key: 0\n      }, _renderList($setup.restaurants, restaurant => {\n        return _openBlock(), _createBlock(_component_v_col, {\n          class: \"pt-5 pb-5\",\n          lg: \"3\",\n          md: \"6\",\n          cols: \"12\",\n          key: restaurant.id\n        }, {\n          default: _withCtx(() => [_createVNode(_component_v_card, {\n            variant: \"flat\",\n            color: \"blue-lighten-1\",\n            to: {\n              name: 'menus',\n              'params': {\n                rid: restaurant.id\n              }\n            },\n            hover: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_v_card_title, {\n              class: \"text-lighten-5\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_v_row, null, {\n                default: _withCtx(() => [_createVNode(_component_v_col, {\n                  cols: \"9\"\n                }, {\n                  default: _withCtx(() => [_createVNode(_component_v_icon, {\n                    icon: \"mdi-silverware\"\n                  }), _createTextVNode(\" \" + _toDisplayString(restaurant.name), 1 /* TEXT */)]),\n                  _: 2 /* DYNAMIC */\n                }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_v_col, {\n                  cols: \"3\"\n                }, {\n                  default: _withCtx(() => [restaurant.owner == $setup.claims.sub ? (_openBlock(), _createBlock(_component_v_btn, {\n                    key: 0,\n                    color: \"blue-lighten-5\",\n                    size: _ctx.x - _ctx.small,\n                    onClick: _withModifiers($event => $setup.deleteRestaurant(restaurant.id), [\"stop\", \"prevent\"])\n                  }, {\n                    default: _withCtx(() => [_createVNode(_component_v_icon, {\n                      icon: \"mdi-delete\",\n                      color: \"blue-lighten-1\",\n                      size: _ctx.small\n                    }, null, 8 /* PROPS */, [\"size\"])]),\n                    _: 2 /* DYNAMIC */\n                  }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"size\", \"onClick\"])) : _createCommentVNode(\"v-if\", true)]),\n                  _: 2 /* DYNAMIC */\n                }, 1024 /* DYNAMIC_SLOTS */)]),\n                _: 2 /* DYNAMIC */\n              }, 1024 /* DYNAMIC_SLOTS */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */);\n      }), 128 /* KEYED_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), $setup.empty ? (_openBlock(), _createBlock(_component_v_row, {\n      key: 2,\n      md: \"8\",\n      \"offset-md\": \"2\",\n      lg: \"6\",\n      \"offset-lg\": \"3\",\n      xl: \"4\",\n      \"offset-xl\": \"4\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card, {\n        elevation: \"16\",\n        \"min-width\": \"200px\",\n        color: \"blue-lighten-1\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card_title, null, {\n          default: _withCtx(() => [_hoisted_2]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_v_divider)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_v_dialog, {\n    modelValue: $setup.deleteModal,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.deleteModal = $event),\n    \"max-width\": \"500px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_card, {\n      variant: \"flat\",\n      color: \"blue-lighten-5\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card_title, null, {\n        default: _withCtx(() => [_hoisted_3]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [_createCommentVNode(\" Modal body content \"), _hoisted_4]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [_createVNode(_component_v_spacer), _createVNode(_component_v_btn, {\n          color: \"blue-lighten-1\",\n          onClick: $setup.deleteModalClose,\n          class: \"blue-lighten-5--text\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\" Close \")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createVNode","_component_v_container","_component_LoadingDialog","$setup","loading","$event","claims","role","_createBlock","_component_v_col","md","lg","xl","_hoisted_1","_component_v_btn","color","to","name","size","active","_component_v_row","_createElementBlock","_Fragment","key","_renderList","restaurants","restaurant","cols","id","_component_v_card","variant","rid","hover","_component_v_card_title","_component_v_icon","icon","_toDisplayString","owner","sub","_ctx","x","small","onClick","_withModifiers","deleteRestaurant","empty","elevation","_hoisted_2","_component_v_divider","_component_v_dialog","deleteModal","_hoisted_3","_component_v_card_text","_createCommentVNode","_hoisted_4","_component_v_card_actions","_component_v_spacer","deleteModalClose"],"sources":["C:\\Users\\Gedvilas\\Desktop 2\\Kirpyklu-sistema-front\\src\\views\\RestaurantList.vue"],"sourcesContent":["<template>\r\n    <v-container align-start>\r\n        <LoadingDialog v-model=\"loading\"/>\r\n\r\n        <v-col v-if=\"!loading && claims.role === 'Owner'\" md=\"8\" offset-md=\"2\" lg=\"6\" offset-lg=\"3\" xl=\"2\" offset-xl=\"5\" class=\"mb-5 mt-5\">\r\n            <div class=\"text-center \">\r\n                <v-btn color=\"blue-lighten-1\" class=\"text-capitalize\" :to=\"{name: 'restaurants'}\" size=\"large\" :active=\"false\">Create new restaurant</v-btn>\r\n            </div>\r\n        </v-col>\r\n\r\n        <v-row v-if=\"!loading\" class=\"mt-5\">\r\n            <v-col v-if=\"!loading\" class=\"pt-5 pb-5\" v-for=\"restaurant in restaurants\" lg=\"3\" md=\"6\" cols=\"12\" :key=\"restaurant.id\">\r\n                <v-card variant=\"flat\" color=\"blue-lighten-1\" :to=\"{name: 'menus', 'params': { rid: restaurant.id }}\" hover>\r\n                    <v-card-title class=\"text-lighten-5\">\r\n                        <v-row>\r\n                            <v-col cols=\"9\">\r\n                                <v-icon icon=\"mdi-silverware\"></v-icon>\r\n                                {{ restaurant.name }}\r\n                            </v-col>\r\n                            <v-col cols=\"3\">\r\n                                <v-btn v-if=\"restaurant.owner == claims.sub\" color=\"blue-lighten-5\" :size=\"x-small\" @click.stop.prevent=\"deleteRestaurant(restaurant.id)\">\r\n                                    <v-icon icon=\"mdi-delete\" color=\"blue-lighten-1\" :size=\"small\"></v-icon>\r\n                                </v-btn>\r\n                            </v-col>\r\n                        </v-row>\r\n                    </v-card-title>\r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n\r\n        <v-row v-if=\"empty\" md=\"8\" offset-md=\"2\" lg=\"6\" offset-lg=\"3\" xl=\"4\" offset-xl=\"4\">\r\n                <v-card elevation=\"16\" min-width=\"200px\" color=\"blue-lighten-1\">\r\n                    <v-card-title>\r\n                        <div class=\"text-h3 text-center\">Found no restaurants!</div>\r\n                    </v-card-title>\r\n                    <v-divider></v-divider>\r\n                </v-card>\r\n        </v-row>\r\n\r\n    </v-container>\r\n\r\n    <v-dialog v-model=\"deleteModal\" max-width=\"500px\">\r\n        <v-card variant=\"flat\" color=\"blue-lighten-5\">\r\n            <v-card-title>\r\n                <span class=\"headline\">Confirm Deletion</span>\r\n            </v-card-title>\r\n            <v-card-text>\r\n                <!-- Modal body content -->\r\n                <p>Are you sure you want to delete this restaurant?</p>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"blue-lighten-1\" @click=\"deleteModalClose\" class=\"blue-lighten-5--text\">\r\n                    Close\r\n                </v-btn>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { computed, nextTick, reactive, ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport LoadingDialog from '../components/LoadingDialog.vue'\r\nimport TableLoader from '../components/TableLoader.vue'\r\nimport CloseButton from '../components/CloseButton.vue'\r\nimport { jwtDecode } from 'jwt-decode'\r\nimport { POSITION, useToast } from 'vue-toastification'\r\nimport router from '@/router'\r\nexport default {\r\n    props: ['cityId', 'managerId', 'token'],\r\n    components: {\r\n        TableLoader,\r\n        LoadingDialog\r\n    },\r\n    setup(props, context){\r\n\r\n        const toast = useToast()\r\n        const restaurants = ref([])\r\n        const loading = ref(true)\r\n        const empty = ref(false)\r\n        const deleteModal = ref(false)\r\n\r\n        const claims = computed(() => {\r\n            if(props.token)\r\n                return jwtDecode(props.token)\r\n        })\r\n\r\n        const fetchRestaurants = () => {\r\n            axios.get(`${process.env.VUE_APP_API}/restaurant`)\r\n                .then((res) => {\r\n                    restaurants.value = res.data\r\n                    loading.value = false\r\n                }).catch((err) => {\r\n                    if(err.response?.status === 401){\r\n                        axios.post(`${process.env.VUE_APP_API}/refresh`)\r\n                            .then((res) => {\r\n                                const accessToken = res.data.data.token\r\n                                context.emit('refresh', accessToken)\r\n                                fetchRestaurants()\r\n                            }).catch((err) => {\r\n\r\n                            })\r\n                    }\r\n                    else if(err.response?.status === 404)\r\n                    {\r\n                        empty.value = true\r\n                        loading.value = false\r\n                    }\r\n                    if(!err.response) {\r\n                        toast.error('Server is currently offline', {\r\n                            position: POSITION.TOP_CENTER,\r\n                            timeout: 3000,\r\n                            closeButton: CloseButton\r\n                        })\r\n                    }\r\n                    else console.log(err)\r\n                })\r\n        }\r\n\r\n        const deleteRestaurant = (index) => {\r\n            deleteModal.value = true;\r\n        }\r\n\r\n        const deleteModalClose = () => {\r\n            deleteModal.value = false;\r\n        }\r\n        \r\n        onMounted(() => {\r\n            fetchRestaurants() // Initial fetch of restaurants\r\n        })\r\n\r\n        return { restaurants, loading, empty, claims, deleteRestaurant, deleteModalClose, deleteModal }\r\n\r\n        return { \r\n            restaurants\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.blue-lighten-5--text {\r\n  background-color: var(--v-blue-lighten-5);\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}