{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"text-align\": \"center\",\n    \"font-size\": \"40px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"column-content\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\",\n    \"height\": \"200px\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-h3 text-center\"\n}, \"Found no dishes for this menu!\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LoadingDialog = _resolveComponent(\"LoadingDialog\");\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_divider = _resolveComponent(\"v-divider\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  return $props.token ? (_openBlock(), _createBlock(_component_v_container, {\n    key: 0,\n    class: \"fill-height\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_LoadingDialog, {\n      modelValue: $setup.loading,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loading = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"]), !$setup.loading ? (_openBlock(), _createBlock(_component_v_row, {\n      key: 0\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.dishes, dish => {\n        return _openBlock(), _createBlock(_component_v_col, {\n          class: \"pt-2 pb-2\",\n          key: dish.id\n        }, {\n          default: _withCtx(() => [_createVNode(_component_v_card, {\n            variant: \"flat\",\n            color: \"blue-lighten-1\",\n            to: {\n              name: 'menus',\n              'params': {\n                rid: dish.id\n              }\n            },\n            hover: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_v_card_title, {\n              class: \"text-lighten-5\"\n            }, {\n              default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, _toDisplayString(dish.name), 1 /* TEXT */), _createVNode(_component_v_row, null, {\n                default: _withCtx(() => [_createVNode(_component_v_col, {\n                  cols: \"12\",\n                  md: \"4\"\n                }, {\n                  default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n                    src: dish.picture,\n                    alt: \"Image\",\n                    width: \"200\",\n                    height: \"200\"\n                  }, null, 8 /* PROPS */, _hoisted_3)])]),\n                  _: 2 /* DYNAMIC */\n                }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_v_col, {\n                  cols: \"12\",\n                  md: \"8\"\n                }, {\n                  default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, _toDisplayString(dish.description), 1 /* TEXT */)])]),\n                  _: 2 /* DYNAMIC */\n                }, 1024 /* DYNAMIC_SLOTS */)]),\n                _: 2 /* DYNAMIC */\n              }, 1024 /* DYNAMIC_SLOTS */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */);\n      }), 128 /* KEYED_FRAGMENT */))]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), $setup.empty ? (_openBlock(), _createBlock(_component_v_row, {\n      key: 1,\n      md: \"8\",\n      \"offset-md\": \"2\",\n      lg: \"6\",\n      \"offset-lg\": \"3\",\n      xl: \"4\",\n      \"offset-xl\": \"4\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card, {\n        elevation: \"16\",\n        \"min-width\": \"200px\",\n        color: \"blue-lighten-1\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_card_title, null, {\n          default: _withCtx(() => [_hoisted_6]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_v_divider)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["style","class","_createElementVNode","$props","token","_createBlock","_component_v_container","_createVNode","_component_LoadingDialog","$setup","loading","$event","_component_v_row","key","_createElementBlock","_Fragment","_renderList","dishes","dish","_component_v_col","id","_component_v_card","variant","color","to","name","rid","hover","_component_v_card_title","_hoisted_1","_toDisplayString","cols","md","_hoisted_2","src","picture","alt","width","height","_hoisted_4","_hoisted_5","description","empty","lg","xl","elevation","_hoisted_6","_component_v_divider"],"sources":["C:\\Users\\Gedvilas\\Desktop 2\\Kirpyklu-sistema-front\\src\\views\\DishList.vue"],"sourcesContent":["<template>\r\n    <v-container v-if=\"token\" class=\"fill-height\">\r\n        <LoadingDialog v-model=\"loading\"/>\r\n\r\n        <v-row v-if=\"!loading\">\r\n            <v-col class=\"pt-2 pb-2\" v-for=\"dish in dishes\" :key=\"dish.id\">\r\n                <v-card variant=\"flat\" color=\"blue-lighten-1\" :to=\"{name: 'menus', 'params': { rid: dish.id }}\" hover>\r\n                    <v-card-title class=\"text-lighten-5\">\r\n                        <div style=\"text-align: center; font-size: 40px;\">\r\n                            {{ dish.name }}\r\n                        </div>\r\n                        <v-row>\r\n                            <v-col cols=\"12\" md=\"4\">\r\n                                <div class=\"column-content\">\r\n                                    <img :src=\"dish.picture\" alt=\"Image\" width=\"200\" height=\"200\" />\r\n                                </div>\r\n                            </v-col>\r\n                            <v-col cols=\"12\" md=\"8\">\r\n                                <div style=\"display: flex; align-items: center; height: 200px;\">\r\n                                    <div style=\"margin-left: 10px;\">\r\n                                        {{ dish.description }}\r\n                                    </div>\r\n                                </div>\r\n                            </v-col>\r\n                        </v-row>\r\n                    </v-card-title>\r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n\r\n        <v-row v-if=\"empty\" md=\"8\" offset-md=\"2\" lg=\"6\" offset-lg=\"3\" xl=\"4\" offset-xl=\"4\">\r\n                <v-card elevation=\"16\" min-width=\"200px\" color=\"blue-lighten-1\">\r\n                    <v-card-title>\r\n                        <div class=\"text-h3 text-center\">Found no dishes for this menu!</div>\r\n                    </v-card-title>\r\n                    <v-divider></v-divider>\r\n                </v-card>\r\n        </v-row>\r\n\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { computed, nextTick, reactive, ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport LoadingDialog from '../components/LoadingDialog.vue'\r\nimport TableLoader from '../components/TableLoader.vue'\r\nimport CloseButton from '../components/CloseButton.vue'\r\nimport { jwtDecode } from 'jwt-decode'\r\nimport { POSITION, useToast } from 'vue-toastification'\r\nimport router from '@/router'\r\nexport default {\r\n    props: ['rid', 'mid', 'token'],\r\n    components: {\r\n        TableLoader,\r\n        LoadingDialog\r\n    },\r\n    setup(props, context){\r\n\r\n        const toast = useToast()\r\n        const dishes = ref([])\r\n        const loading = ref(true)\r\n        const empty = ref(false)\r\n\r\n        console.log(props.rid)\r\n        console.log(props.mid)\r\n\r\n        const fetchDishes = () => {\r\n            axios.get(`${process.env.VUE_APP_API}/restaurant/${props.rid}/menu/${props.mid}/dish`)\r\n                .then((res) => {\r\n                    console.log(\"Got it\")\r\n                    console.log(res.data)\r\n                    dishes.value = res.data\r\n                    loading.value = false\r\n                }).catch((err) => {\r\n                    if(err.response?.status === 401){\r\n                        axios.post(`${process.env.VUE_APP_API}/refresh`)\r\n                            .then((res) => {\r\n                                const accessToken = res.data.data.token\r\n                                context.emit('refresh', accessToken)\r\n                                fetchDishes()\r\n                            }).catch((err) => {\r\n\r\n                            })\r\n                    }\r\n                    else if(err.response?.status === 404)\r\n                    {\r\n                        empty.value = true\r\n                        loading.value = false\r\n                    }\r\n                    console.log(\"Response\")\r\n                    console.log(err.response)\r\n                    if(!err.response) {\r\n                        toast.error('Server is currently offline', {\r\n                            position: POSITION.TOP_CENTER,\r\n                            timeout: 3000,\r\n                            closeButton: CloseButton\r\n                        })\r\n                    }\r\n                    else console.log(err)\r\n                })\r\n        }\r\n\r\n        onMounted(() => {\r\n            fetchDishes() // Initial fetch of restaurants\r\n        })\r\n\r\n        return { dishes, loading, empty }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":";;EAQ6BA,KAA4C,EAA5C;IAAA;IAAA;EAAA;AAA4C;;EAKpCC,KAAK,EAAC;AAAgB;;;EAKtBD,KAA0D,EAA1D;IAAA;IAAA;IAAA;EAAA;AAA0D;;EACtDA,KAA0B,EAA1B;IAAA;EAAA;AAA0B;gCAc3CE,mBAAA,CAAqE;EAAhED,KAAK,EAAC;AAAqB,GAAC,gCAA8B;;;;;;;;;SAhChEE,MAAA,CAAAC,KAAK,I,cAAxBC,YAAA,CAsCcC,sBAAA;;IAtCYL,KAAK,EAAC;;sBAC5B,MAAkC,CAAlCM,YAAA,CAAkCC,wBAAA;kBAAVC,MAAA,CAAAC,OAAO;iEAAPD,MAAA,CAAAC,OAAO,GAAAC,MAAA;8CAEjBF,MAAA,CAAAC,OAAO,I,cAArBL,YAAA,CAwBQO,gBAAA;MAAAC,GAAA;IAAA;wBAvBqB,MAAsB,E,kBAA/CC,mBAAA,CAsBQC,SAAA,QAAAC,WAAA,CAtBgCP,MAAA,CAAAQ,MAAM,EAAdC,IAAI;6BAApCb,YAAA,CAsBQc,gBAAA;UAtBDlB,KAAK,EAAC,WAAW;UAAyBY,GAAG,EAAEK,IAAI,CAACE;;4BACvD,MAoBS,CApBTb,YAAA,CAoBSc,iBAAA;YApBDC,OAAO,EAAC,MAAM;YAACC,KAAK,EAAC,gBAAgB;YAAEC,EAAE;cAAAC,IAAA;cAAA;gBAAAC,GAAA,EAAmCR,IAAI,CAACE;cAAE;YAAA;YAAKO,KAAK,EAAL;;8BAC5F,MAkBe,CAlBfpB,YAAA,CAkBeqB,uBAAA;cAlBD3B,KAAK,EAAC;YAAgB;gCAChC,MAEM,CAFNC,mBAAA,CAEM,OAFN2B,UAEM,EAAAC,gBAAA,CADCZ,IAAI,CAACO,IAAI,kBAEhBlB,YAAA,CAaQK,gBAAA;kCAZJ,MAIQ,CAJRL,YAAA,CAIQY,gBAAA;kBAJDY,IAAI,EAAC,IAAI;kBAACC,EAAE,EAAC;;oCAChB,MAEM,CAFN9B,mBAAA,CAEM,OAFN+B,UAEM,GADF/B,mBAAA,CAAgE;oBAA1DgC,GAAG,EAAEhB,IAAI,CAACiB,OAAO;oBAAEC,GAAG,EAAC,OAAO;oBAACC,KAAK,EAAC,KAAK;oBAACC,MAAM,EAAC;;;8CAGhE/B,YAAA,CAMQY,gBAAA;kBANDY,IAAI,EAAC,IAAI;kBAACC,EAAE,EAAC;;oCAChB,MAIM,CAJN9B,mBAAA,CAIM,OAJNqC,UAIM,GAHFrC,mBAAA,CAEM,OAFNsC,UAEM,EAAAV,gBAAA,CADCZ,IAAI,CAACuB,WAAW,iB;;;;;;;;;;;;;6CAUtChC,MAAA,CAAAiC,KAAK,I,cAAlBrC,YAAA,CAOQO,gBAAA;;MAPYoB,EAAE,EAAC,GAAG;MAAC,WAAS,EAAC,GAAG;MAACW,EAAE,EAAC,GAAG;MAAC,WAAS,EAAC,GAAG;MAACC,EAAE,EAAC,GAAG;MAAC,WAAS,EAAC;;wBACvE,MAKS,CALTrC,YAAA,CAKSc,iBAAA;QALDwB,SAAS,EAAC,IAAI;QAAC,WAAS,EAAC,OAAO;QAACtB,KAAK,EAAC;;0BAC3C,MAEe,CAFfhB,YAAA,CAEeqB,uBAAA;4BADX,MAAqE,CAArEkB,UAAqE,C;;YAEzEvC,YAAA,CAAuBwC,oBAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}