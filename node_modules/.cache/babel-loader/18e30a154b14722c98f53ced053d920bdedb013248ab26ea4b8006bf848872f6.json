{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, withCtx as _withCtx } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_v_main = _resolveComponent(\"v-main\");\n  const _component_Footer = _resolveComponent(\"Footer\");\n  const _component_v_app = _resolveComponent(\"v-app\");\n  return _openBlock(), _createBlock(_component_v_app, null, {\n    default: _withCtx(() => [_createVNode(_component_Navbar, {\n      token: $setup.token,\n      onLogout: $setup.handleLogout\n    }, null, 8 /* PROPS */, [\"token\", \"onLogout\"]), _createVNode(_component_v_main, null, {\n      default: _withCtx(() => [(_openBlock(), _createBlock(_component_router_view, {\n        token: $setup.token,\n        key: _ctx.$route.fullPath,\n        onLogin: $setup.handleLogin,\n        onRefresh: $setup.handleRefresh,\n        onInvalidate: $setup.handleInvalidate\n      }, null, 8 /* PROPS */, [\"token\", \"onLogin\", \"onRefresh\", \"onInvalidate\"]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_Footer)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_v_app","_createVNode","_component_Navbar","token","$setup","onLogout","handleLogout","_component_v_main","_component_router_view","key","_ctx","$route","fullPath","onLogin","handleLogin","onRefresh","handleRefresh","onInvalidate","handleInvalidate","_component_Footer"],"sources":["C:\\Users\\Gedvilas\\Desktop 2\\Kirpyklu-sistema-front\\src\\App.vue"],"sourcesContent":["<template>\n  <v-app>\n      <Navbar :token=\"token\" @logout=\"handleLogout\"/>\n      <v-main>\n          <router-view :token=\"token\" :key=\"$route.fullPath\" @login=\"handleLogin\" @refresh=\"handleRefresh\" @invalidate=\"handleInvalidate\"/>\n      </v-main>\n      <Footer />\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Navbar from './components/Navbar.vue'\nimport Footer from './components/Footer.vue'\nimport CloseButton from './components/CloseButton.vue'\nimport router from './router'\nimport { ref } from 'vue'\nimport { POSITION, useToast } from 'vue-toastification'\nexport default {\n  components: {\n    Navbar,\n    Footer\n  },\n  setup() {\n    const toast = useToast()\n    const token = ref(localStorage.getItem('token'))\n\n    if(token)\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.value\n\n    const handleInvalidate = () => {\n      axios.defaults.headers.common['Authorization'] = ''\n      localStorage.clear()\n      token.value = null\n    }\n    const handleLogout = () => {\n      handleInvalidate()\n      toast.info('Successfully logged out', {\n        position: POSITION.TOP_CENTER,\n        timeout: 3000,\n        closeButton: CloseButton\n      })\n      router.push({ name:'home' })\n    }\n    const handleLogin = (accessToken) => {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken\n      localStorage.setItem('token', accessToken)\n      token.value = accessToken\n      router.push({name: 'home'})\n    }\n    const handleRefresh = (accessToken) => {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken\n      localStorage.setItem('token', accessToken)\n      token.value = accessToken\n    }\n    return {token, handleInvalidate, handleLogout, handleLogin, handleRefresh}\n  }\n}\n</script>\n\n\n<style>\n.v-table > .v-table__wrapper > table > tbody > tr > th, .v-table > .v-table__wrapper > table > thead > tr > th, .v-table > .v-table__wrapper > table > tfoot > tr > th{\n    font-weight: bold !important;\n}\n</style>\n"],"mappings":";;;;;;;uBACEA,YAAA,CAMQC,gBAAA;sBALJ,MAA+C,CAA/CC,YAAA,CAA+CC,iBAAA;MAAtCC,KAAK,EAAEC,MAAA,CAAAD,KAAK;MAAGE,QAAM,EAAED,MAAA,CAAAE;oDAChCL,YAAA,CAESM,iBAAA;wBADL,MAAiI,E,cAAjIR,YAAA,CAAiIS,sBAAA;QAAnHL,KAAK,EAAEC,MAAA,CAAAD,KAAK;QAAGM,GAAG,EAAEC,IAAA,CAAAC,MAAM,CAACC,QAAQ;QAAGC,OAAK,EAAET,MAAA,CAAAU,WAAW;QAAGC,SAAO,EAAEX,MAAA,CAAAY,aAAa;QAAGC,YAAU,EAAEb,MAAA,CAAAc;;;QAElHjB,YAAA,CAAUkB,iBAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}