{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport Navbar from './components/Navbar.vue';\nimport CloseButton from './components/CloseButton.vue';\nimport router from './router';\nimport { ref } from 'vue';\nimport { POSITION, useToast } from 'vue-toastification';\nexport default {\n  components: {\n    Navbar,\n    Footer\n  },\n  setup() {\n    const toast = useToast();\n    const token = ref(localStorage.getItem('token'));\n    if (token) axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.value;\n    const handleInvalidate = () => {\n      axios.defaults.headers.common['Authorization'] = '';\n      localStorage.clear();\n      token.value = null;\n    };\n    const handleLogout = () => {\n      handleInvalidate();\n      toast.info('Successfully logged out', {\n        position: POSITION.TOP_CENTER,\n        timeout: 3000,\n        closeButton: CloseButton\n      });\n      router.push({\n        name: 'home'\n      });\n    };\n    const handleLogin = accessToken => {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken;\n      localStorage.setItem('token', accessToken);\n      token.value = accessToken;\n      router.push({\n        name: 'home'\n      });\n    };\n    const handleRefresh = accessToken => {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken;\n      localStorage.setItem('token', accessToken);\n      token.value = accessToken;\n    };\n    return {\n      token,\n      handleInvalidate,\n      handleLogout,\n      handleLogin,\n      handleRefresh\n    };\n  }\n};","map":{"version":3,"names":["axios","Navbar","CloseButton","router","ref","POSITION","useToast","components","Footer","setup","toast","token","localStorage","getItem","defaults","headers","common","value","handleInvalidate","clear","handleLogout","info","position","TOP_CENTER","timeout","closeButton","push","name","handleLogin","accessToken","setItem","handleRefresh"],"sources":["C:\\Users\\Gedvilas\\Desktop 2\\Kirpyklu-sistema-front\\src\\App.vue"],"sourcesContent":["<template>\n  <v-app>\n      <Navbar :token=\"token\" @logout=\"handleLogout\"/>\n      <v-main>\n          <router-view :token=\"token\" :key=\"$route.fullPath\" @login=\"handleLogin\" @refresh=\"handleRefresh\" @invalidate=\"handleInvalidate\"/>\n      </v-main>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Navbar from './components/Navbar.vue'\nimport CloseButton from './components/CloseButton.vue'\nimport router from './router'\nimport { ref } from 'vue'\nimport { POSITION, useToast } from 'vue-toastification'\nexport default {\n  components: {\n    Navbar,\n    Footer\n  },\n  setup() {\n    const toast = useToast()\n    const token = ref(localStorage.getItem('token'))\n\n    if(token)\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + token.value\n\n    const handleInvalidate = () => {\n      axios.defaults.headers.common['Authorization'] = ''\n      localStorage.clear()\n      token.value = null\n    }\n    const handleLogout = () => {\n      handleInvalidate()\n      toast.info('Successfully logged out', {\n        position: POSITION.TOP_CENTER,\n        timeout: 3000,\n        closeButton: CloseButton\n      })\n      router.push({ name:'home' })\n    }\n    const handleLogin = (accessToken) => {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken\n      localStorage.setItem('token', accessToken)\n      token.value = accessToken\n      router.push({name: 'home'})\n    }\n    const handleRefresh = (accessToken) => {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken\n      localStorage.setItem('token', accessToken)\n      token.value = accessToken\n    }\n    return {token, handleInvalidate, handleLogout, handleLogin, handleRefresh}\n  }\n}\n</script>\n\n\n<style>\n.v-table > .v-table__wrapper > table > tbody > tr > th, .v-table > .v-table__wrapper > table > thead > tr > th, .v-table > .v-table__wrapper > table > tfoot > tr > th{\n    font-weight: bold !important;\n}\n</style>\n"],"mappings":";AAUA,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,MAAK,MAAO,yBAAwB;AAC3C,OAAOC,WAAU,MAAO,8BAA6B;AACrD,OAAOC,MAAK,MAAO,UAAS;AAC5B,SAASC,GAAE,QAAS,KAAI;AACxB,SAASC,QAAQ,EAAEC,QAAO,QAAS,oBAAmB;AACtD,eAAe;EACbC,UAAU,EAAE;IACVN,MAAM;IACNO;EACF,CAAC;EACDC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,CAAC;IACvB,MAAMK,KAAI,GAAIP,GAAG,CAACQ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE/C,IAAGF,KAAK,EACNX,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,SAAQ,GAAIL,KAAK,CAACM,KAAI;IAEzE,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC7BlB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,EAAC;MAClDJ,YAAY,CAACO,KAAK,CAAC;MACnBR,KAAK,CAACM,KAAI,GAAI,IAAG;IACnB;IACA,MAAMG,YAAW,GAAIA,CAAA,KAAM;MACzBF,gBAAgB,CAAC;MACjBR,KAAK,CAACW,IAAI,CAAC,yBAAyB,EAAE;QACpCC,QAAQ,EAAEjB,QAAQ,CAACkB,UAAU;QAC7BC,OAAO,EAAE,IAAI;QACbC,WAAW,EAAEvB;MACf,CAAC;MACDC,MAAM,CAACuB,IAAI,CAAC;QAAEC,IAAI,EAAC;MAAO,CAAC;IAC7B;IACA,MAAMC,WAAU,GAAKC,WAAW,IAAK;MACnC7B,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,SAAQ,GAAIa,WAAU;MACvEjB,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAED,WAAW;MACzClB,KAAK,CAACM,KAAI,GAAIY,WAAU;MACxB1B,MAAM,CAACuB,IAAI,CAAC;QAACC,IAAI,EAAE;MAAM,CAAC;IAC5B;IACA,MAAMI,aAAY,GAAKF,WAAW,IAAK;MACrC7B,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,SAAQ,GAAIa,WAAU;MACvEjB,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAED,WAAW;MACzClB,KAAK,CAACM,KAAI,GAAIY,WAAU;IAC1B;IACA,OAAO;MAAClB,KAAK;MAAEO,gBAAgB;MAAEE,YAAY;MAAEQ,WAAW;MAAEG;IAAa;EAC3E;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}