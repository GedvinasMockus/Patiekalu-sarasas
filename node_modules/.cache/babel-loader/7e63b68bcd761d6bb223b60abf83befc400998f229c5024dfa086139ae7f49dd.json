{"ast":null,"code":"import { computed, ref, watch } from 'vue';\nimport axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\nimport { useDisplay } from 'vuetify/lib/framework.mjs';\nexport default {\n  props: ['token'],\n  setup(props, context) {\n    const drawer = ref(false);\n    const loggingOut = ref(false);\n    const display = useDisplay();\n    watch(display.mdAndUp, newVal => {\n      if (newVal) drawer.value = false;\n    });\n    const claims = computed(() => {\n      if (props.token) return jwtDecode(props.token);\n    });\n    console.log(claims);\n    console.log(\"a\");\n    const handleDrawerClick = () => {\n      drawer.value = !drawer.value;\n    };\n    const handleLogoutClick = () => {\n      loggingOut.value = true;\n      axios.post(`${process.env.VUE_APP_BACKEND_API}/users/logout`).then(() => {\n        loggingOut.value = false;\n        context.emit('logout');\n      }).catch(() => {\n        loggingOut.value = false;\n        context.emit('logout');\n      });\n    };\n    return {\n      drawer,\n      loggingOut,\n      claims,\n      handleDrawerClick,\n      handleLogoutClick\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","watch","axios","jwtDecode","useDisplay","props","setup","context","drawer","loggingOut","display","mdAndUp","newVal","value","claims","token","console","log","handleDrawerClick","handleLogoutClick","post","process","env","VUE_APP_BACKEND_API","then","emit","catch"],"sources":["C:\\Users\\Gedvilas\\Desktop 2\\Kirpyklu-sistema-front\\src\\components\\Navbar.vue"],"sourcesContent":["<template>\n<div>\n    <v-app-bar color=\"blue-darken-1\" elevation=\"16\">\n        <v-toolbar-title>\n            <router-link :to=\"{ name: 'home' }\" class=\"text-uppercase text-h5\" style=\"text-decoration: none; color: inherit;\">\n                Food\n            </router-link>\n        </v-toolbar-title>\n        <v-toolbar-items class=\"hidden-md-and-up\">\n            <v-btn icon=\"mdi-menu\" @click.stop=\"handleDrawerClick\"></v-btn>\n        </v-toolbar-items>\n        <v-toolbar-items v-if=\"token\" class=\"hidden-sm-and-down\">\n            <v-btn v-if=\"claims.role === 'Regular'\" prepend-icon=\"mdi-store\" variant=\"text\" class=\"text-capitalize\" :to=\"{name: 'managerHairSalonList', params: {managerId: claims.sub}}\" :active=\"false\" size=\"large\">Your salons</v-btn>\n            <v-btn prepend-icon=\"mdi-account\" variant=\"text\" class=\"text-capitalize\" :to=\"{name: 'user', params: {userId: claims.sub}}\" :active=\"false\" size=\"large\">Your info</v-btn>\n            <v-btn prepend-icon=\"mdi-logout\" variant=\"text\" class=\"text-capitalize\" size=\"large\" @click=\"handleLogoutClick\" :loading=\"loggingOut\" :disabled=\"loggingOut\">Logout</v-btn>\n        </v-toolbar-items>\n        <v-toolbar-items v-else class=\"hidden-sm-and-down\">\n                <v-btn prepend-icon=\"mdi-login\" variant=\"text\" class=\"text-capitalize\" :to=\"{name: 'login'}\" :active=\"false\" size=\"large\">Login</v-btn>\n                <v-btn prepend-icon=\"mdi-account-outline\" variant=\"text\" class=\"text-capitalize\" :to=\"{name: 'register'}\" :active=\"false\" size=\"large\">Register</v-btn>\n        </v-toolbar-items>\n    </v-app-bar>\n    <v-navigation-drawer v-model=\"drawer\" location=\"right\" temporary color=\"blue-darken-1\">\n        <v-list v-if=\"token\">\n            <v-list-item v-if=\"claims.role === 1\" prepend-icon=\"mdi-store\" variant=\"text\" :to=\"{name: 'managerHairSalonList', params: {managerId: claims.sub}}\">\n                <v-list-item-title>Your salons</v-list-item-title>\n            </v-list-item>\n            <v-list-item prepend-icon=\"mdi-account\" variant=\"text\" :to=\"{name: 'user', params: {userId: claims.sub}}\">\n                Your info\n            </v-list-item>\n            <v-list-item v-if=\"loggingOut\" class=\"text-center\">\n                    <v-progress-circular indeterminate></v-progress-circular>\n            </v-list-item>\n            <v-list-item v-else prepend-icon=\"mdi-logout\" variant=\"text\" @click=\"handleLogoutClick\">\n                <v-list-item-title>Logout</v-list-item-title>\n            </v-list-item>\n        </v-list>\n        <v-list v-else>\n            <v-list-item prepend-icon=\"mdi-login\" :to=\"{name: 'login'}\" variant=\"text\">\n                <v-list-item-title>Login</v-list-item-title>\n            </v-list-item>\n            <v-list-item prepend-icon=\"mdi-account-plus-outline\" :to=\"{name: 'register'}\" variant=\"text\">\n                <v-list-item-title>Register</v-list-item-title>\n            </v-list-item>\n        </v-list>\n    </v-navigation-drawer>\n</div>\n</template>\n\n<script>\nimport { computed, ref, watch } from 'vue'\nimport axios from 'axios'\nimport { jwtDecode } from 'jwt-decode'\nimport { useDisplay } from 'vuetify/lib/framework.mjs'\nexport default {\n    props: ['token'],\n    setup(props, context){\n        const drawer = ref(false)\n        const loggingOut = ref(false)\n        const display = useDisplay()\n        watch(display.mdAndUp, (newVal) => {\n            if(newVal) drawer.value = false\n        })\n        const claims = computed(() => {\n            if(props.token)\n                return jwtDecode(props.token)\n        })\n        console.log(claims)\n        console.log(\"a\")\n        const handleDrawerClick = () => {\n            drawer.value = !drawer.value\n        }\n        const handleLogoutClick = () => {\n            loggingOut.value = true\n            axios.post(`${process.env.VUE_APP_BACKEND_API}/users/logout`)\n                .then(() => {\n                    loggingOut.value = false\n                    context.emit('logout')\n                }).catch(() => {\n                    loggingOut.value = false\n                    context.emit('logout')\n                })\n        }\n\n\n        return { drawer, loggingOut, claims, handleDrawerClick, handleLogoutClick }\n    }\n}\n</script>\n\n<style>\n\n</style>"],"mappings":"AAiDA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,KAAI,QAAS,KAAI;AACzC,OAAOC,KAAI,MAAO,OAAM;AACxB,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,UAAS,QAAS,2BAA0B;AACrD,eAAe;EACXC,KAAK,EAAE,CAAC,OAAO,CAAC;EAChBC,KAAKA,CAACD,KAAK,EAAEE,OAAO,EAAC;IACjB,MAAMC,MAAK,GAAIR,GAAG,CAAC,KAAK;IACxB,MAAMS,UAAS,GAAIT,GAAG,CAAC,KAAK;IAC5B,MAAMU,OAAM,GAAIN,UAAU,CAAC;IAC3BH,KAAK,CAACS,OAAO,CAACC,OAAO,EAAGC,MAAM,IAAK;MAC/B,IAAGA,MAAM,EAAEJ,MAAM,CAACK,KAAI,GAAI,KAAI;IAClC,CAAC;IACD,MAAMC,MAAK,GAAIf,QAAQ,CAAC,MAAM;MAC1B,IAAGM,KAAK,CAACU,KAAK,EACV,OAAOZ,SAAS,CAACE,KAAK,CAACU,KAAK;IACpC,CAAC;IACDC,OAAO,CAACC,GAAG,CAACH,MAAM;IAClBE,OAAO,CAACC,GAAG,CAAC,GAAG;IACf,MAAMC,iBAAgB,GAAIA,CAAA,KAAM;MAC5BV,MAAM,CAACK,KAAI,GAAI,CAACL,MAAM,CAACK,KAAI;IAC/B;IACA,MAAMM,iBAAgB,GAAIA,CAAA,KAAM;MAC5BV,UAAU,CAACI,KAAI,GAAI,IAAG;MACtBX,KAAK,CAACkB,IAAI,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,mBAAoB,eAAc,EACvDC,IAAI,CAAC,MAAM;QACRf,UAAU,CAACI,KAAI,GAAI,KAAI;QACvBN,OAAO,CAACkB,IAAI,CAAC,QAAQ;MACzB,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;QACXjB,UAAU,CAACI,KAAI,GAAI,KAAI;QACvBN,OAAO,CAACkB,IAAI,CAAC,QAAQ;MACzB,CAAC;IACT;IAGA,OAAO;MAAEjB,MAAM;MAAEC,UAAU;MAAEK,MAAM;MAAEI,iBAAiB;MAAEC;IAAkB;EAC9E;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}